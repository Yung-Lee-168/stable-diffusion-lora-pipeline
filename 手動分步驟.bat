@echo off
chcp 65001 > nul
cls
echo ================================================================
echo                    æ‰‹å‹•åˆ†æ­¥é©Ÿæ“ä½œæŒ‡å—
echo ================================================================
echo.
echo é€™å€‹è…³æœ¬æœƒåˆ†æ­¥é©Ÿå¼•å°æ‚¨å®Œæˆæ‰€æœ‰æ“ä½œ
echo.

echo ğŸš€ ç¬¬1æ­¥ï¼šå•Ÿå‹• WebUI
echo.
echo é¸æ“‡å•Ÿå‹•æ–¹å¼ï¼š
echo [1] è‡ªå‹•åœ¨æ–°è¦–çª—å•Ÿå‹• (æ¨è–¦)
echo [2] æ‰‹å‹•å•Ÿå‹•èªªæ˜
echo.
set /p choice="è«‹é¸æ“‡ (1 æˆ– 2): "

if "%choice%"=="1" (
    echo.
    echo æ­£åœ¨æ–°è¦–çª—ä¸­å•Ÿå‹• WebUI...
    start "Stable Diffusion WebUI" cmd /c "webui.bat --api & echo WebUI å·²å•Ÿå‹•ï¼Œè«‹ä¿æŒæ­¤è¦–çª—é–‹å•Ÿ & pause"
    echo âœ… WebUI å·²åœ¨æ–°è¦–çª—ä¸­å•Ÿå‹•
) else (
    echo.
    echo è«‹æ‰‹å‹•åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š
    echo 1. é–‹å•Ÿæ–°çš„å‘½ä»¤æç¤ºå­—å…ƒè¦–çª—
    echo 2. åˆ‡æ›åˆ°ç›®éŒ„ï¼šcd /d "%~dp0"
    echo 3. åŸ·è¡Œï¼šwebui.bat --api
    echo 4. ç­‰å¾…ç€è¦½å™¨è‡ªå‹•æ‰“é–‹
)

echo.
echo ğŸ“‹ é‡è¦æé†’ï¼š
echo    - å¿…é ˆç­‰å¾…ç€è¦½å™¨è‡ªå‹•æ‰“é–‹ http://localhost:7860
echo    - ç¢ºèªå¯ä»¥çœ‹åˆ° WebUI ç•Œé¢
echo    - ä¸è¦é—œé–‰ WebUI è¦–çª—
echo.
echo å®Œæˆå¾ŒæŒ‰ä»»æ„éµç¹¼çºŒ...
pause > nul

cls
echo.
echo ================================================================
echo ğŸ” ç¬¬2æ­¥ï¼šæª¢æŸ¥ WebUI ç‹€æ…‹
echo ================================================================
echo.

python æª¢æŸ¥ç‹€æ…‹.py

echo.
echo å¦‚æœä¸Šé¢é¡¯ç¤º "å¯ä»¥é–‹å§‹æ¸¬è©¦äº†"ï¼Œè«‹æŒ‰ Y ç¹¼çºŒ
echo å¦‚æœé¡¯ç¤ºéŒ¯èª¤ï¼Œè«‹æŒ‰ N é‡æ–°å•Ÿå‹• WebUI
echo.
set /p test_choice="ç¹¼çºŒæ¸¬è©¦? (Y/N): "

if /i "%test_choice%"=="Y" goto run_test
if /i "%test_choice%"=="y" goto run_test

echo.
echo è«‹é‡æ–°å•Ÿå‹• WebUI å¾Œå†é‹è¡Œæ­¤è…³æœ¬
pause
exit

:run_test
cls
echo.
echo ================================================================
echo ğŸ§ª ç¬¬3æ­¥ï¼šåŸ·è¡Œæ¸¬è©¦
echo ================================================================
echo.

python day2_enhanced_test.py

echo.
echo ================================================================
echo âœ… å®Œæˆï¼
echo ================================================================
pause
